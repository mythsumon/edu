# Instructor & Teacher Flow Guide

## 📋 목차
1. [Instructor (강사) 플로우](#instructor-강사-플로우)
2. [Teacher (교사) 플로우](#teacher-교사-플로우)
3. [주요 페이지 경로](#주요-페이지-경로)
4. [상태 전환 다이어그램](#상태-전환-다이어그램)

---

## 👨‍🏫 Instructor (강사) 플로우

### 1. 대시보드 (`/instructor/dashboard`)

**목적**: 강사 개인 대시보드에서 전체 현황 파악

**주요 정보**:
- 내 출강 리스트 (전체/예정/진행중/완료)
- 오픈 예정 교육
- 신청 가능 교육
- 진행 중인 교육
- 완료된 교육

**카드 클릭 시**:
- 해당 필터로 자동 전환
- 제목 동적 변경 (예: "오픈 예정" 클릭 시 제목이 "오픈 예정"으로 변경)
- 해당 상태의 교육만 표시

**다음 액션**:
- 내 출강 리스트 상세보기
- 교육 신청하기
- 문서 작성하기

---

### 2. 출강 신청 플로우

#### 2.1 오픈 예정 교육 (`/instructor/apply/upcoming`)
**목적**: 곧 오픈될 교육 미리보기

**기능**:
- 오픈 예정 교육 목록 조회
- 교육 정보 미리보기
- 신청 불가 (아직 오픈 전)

**플로우**:
```
오픈 예정 교육 목록 조회
  ↓
교육 정보 확인 (교육명, 기관, 기간)
  ↓
신청 불가 상태 표시
```

#### 2.2 출강 신청하기 (`/instructor/apply/open`)
**목적**: 신청 가능한 교육에 출강 신청

**플로우**:
```
신청 가능한 교육 목록 조회
  ↓
교육 선택
  ↓
역할 선택 (주강사/보조강사)
  ↓
신청 조건 확인:
  - 교육 상태가 "강사공개"여야 함
  - 신청 마감일이 지나지 않아야 함
  ↓
[신청하기] 클릭
  ↓
신청 확인 모달
  ↓
[확인] 클릭
  ↓
신청 완료
  ↓
내가 신청한 교육들 페이지로 이동
```

**신청 제한**:
- 교육 상태가 "강사공개"일 때만 신청 가능
- 신청 마감일 이후에는 신청 불가

#### 2.3 내가 신청한 교육들 (`/instructor/apply/mine`)
**목적**: 내가 신청한 교육의 승인 상태 확인

**플로우**:
```
내 신청 목록 조회
  ↓
신청 상태 확인:
  - 대기: 관리자 검토 중
  - 승인: 출강 확정
  - 거절: 신청 거절됨
  ↓
승인된 교육은 내 출강 리스트에 자동 추가
```

---

### 3. 출강 일정 관리

#### 3.1 내 출강 리스트 (`/instructor/schedule/list`)
**목적**: 내가 배정된 모든 교육 일정 조회

**플로우**:
```
내 출강 리스트 조회
  ↓
교육 카드 확인:
  - 교육명
  - 교육기관
  - 교육 기간
  - 문서 제출 상태 (출석부/활동일지/교구확인서)
  - 교육 상태 (예정/진행중/완료)
  ↓
[상세보기] 클릭
  ↓
교육 상세 정보 확인
  ↓
문서 작성/수정 가능:
  - 출석부 작성하기/수정하기
  - 활동일지 작성하기/수정하기
  - 교구확인서 작성하기/수정하기
  - 강의계획서 작성하기/수정하기
```

**문서 상태 표시**:
- ✅: 제출 완료 (APPROVED)
- ⚠️: 제출됨 (SUBMITTED, 검토 대기)
- ❌: 미제출 (DRAFT)

**실시간 동기화**:
- 관리자가 교육을 생성하면 강사 화면에 즉시 표시
- 문서 제출 시 관리자 화면에 즉시 반영

#### 3.2 확정된 수업 조회 (`/instructor/schedule/confirmed`)
**목적**: 확정된 출강 일정만 조회

**기능**:
- 확정 상태인 교육만 필터링하여 표시

#### 3.3 진행 중인 교육 (`/instructor/schedule/in-progress`)
**목적**: 현재 진행 중인 교육만 조회

**기능**:
- 진행중 상태인 교육만 필터링하여 표시

#### 3.4 완료된 교육 (`/instructor/schedule/completed`)
**목적**: 완료된 교육만 조회

**기능**:
- 완료 상태인 교육만 필터링하여 표시

---

### 4. 문서 작성 및 제출

#### 4.1 출석부 작성 (`/instructor/schedule/[educationId]/attendance`)
**목적**: 교육 출석부 작성 및 제출

**플로우**:
```
교육 선택
  ↓
출석부 작성 페이지 진입
  ↓
교육 정보 확인:
  - 교육명
  - 교육기관
  - 교육 기간
  - 교육 일정 (차시별)
  ↓
학생 정보 입력:
  - 학생명
  - 출석 여부 (차시별)
  - 지각/조퇴/결석 처리
  ↓
기관 연락처 및 서명 정보 입력
  ↓
[임시저장] 또는 [제출하기] 선택
  ↓
임시저장: DRAFT 상태로 저장 (수정 가능)
제출하기: SUBMITTED 상태로 저장 (관리자 검토 대기)
  ↓
제출 완료
  ↓
관리자 문서 제출 현황에 표시됨
```

**출석률 계산**:
- 80% 이상 출석 시 수료 처리
- 자동 계산 및 표시

**상세보기** (`/instructor/attendance/[id]`):
- 제출된 출석부 상세 확인
- 수정하기 버튼 (DRAFT 또는 REJECTED 상태일 때)
- 활동일지 보기 버튼

#### 4.2 활동일지 작성 (`/instructor/activity-logs/[logId]`)
**목적**: 교육 활동일지 작성 및 제출

**플로우**:
```
교육 선택
  ↓
활동일지 작성 페이지 진입
  ↓
교육 정보 확인
  ↓
활동 내용 입력:
  - 교육 시작일/종료일
  - 차시별 활동 내용
  - 활동 사진 업로드 (5장 이상 필수)
  - 강의계획서 업로드
  ↓
[임시저장] 또는 [제출하기] 선택
  ↓
제출 완료
  ↓
관리자 문서 제출 현황에 표시됨
```

**필수 요구사항**:
- 활동 사진 5장 이상 필수
- 차시별 활동 내용 입력 필수

#### 4.3 교구확인서 작성 (`/instructor/equipment-confirmations/[id]`)
**목적**: 교구 대여 및 반납 확인서 작성

**플로우**:
```
교육 선택
  ↓
교구확인서 작성 페이지 진입
  ↓
교육 정보 확인
  ↓
교구 목록 입력:
  - 교구명
  - 수량
  - 대여일
  - 반납 예정일
  ↓
서명 정보 입력:
  - 대여자 서명
  - 관리자 서명
  - 반납 확인 서명
  ↓
첨부 파일 업로드
  ↓
[임시저장] 또는 [제출하기] 선택
  ↓
제출 완료
  ↓
관리자 문서 제출 현황에 표시됨
```

**상태**:
- DRAFT: 초안
- SUBMITTED: 제출됨
- BORROWED: 대여됨 (승인 후)
- RETURNED: 반납됨 (승인 후)
- APPROVED: 승인됨
- REJECTED: 반려됨

#### 4.4 강의계획서 작성 (`/instructor/schedule/[educationId]/lesson-plan`)
**목적**: 강의계획서 작성 및 제출

**플로우**:
```
교육 선택
  ↓
강의계획서 작성 페이지 진입
  ↓
교육 정보 확인
  ↓
강의계획서 정보 입력:
  - 교육목표
  - 차시별 계획
  - 교재 및 준비물
  - 평가 방법
  ↓
[임시저장] 또는 [제출하기] 선택
  ↓
제출 완료
  ↓
관리자 문서 제출 현황에 표시됨
```

#### 4.5 증빙자료 작성 (`/instructor/evidence/[id]`)
**목적**: 증빙자료 작성 및 제출

**플로우**:
```
교육 선택
  ↓
증빙자료 작성 페이지 진입
  ↓
증빙자료 업로드:
  - 영수증
  - 증명서
  - 기타 관련 문서
  ↓
[임시저장] 또는 [제출하기] 선택
  ↓
제출 완료
```

---

### 5. 문서 상태 확인 및 재제출

**플로우**:
```
문서 상태 확인
  ↓
승인된 경우:
  - ✅ 완료 표시
  - 수정 불가
  ↓
반려된 경우:
  - 반려 사유 확인
  - [수정하기] 버튼 클릭
  - 내용 수정
  - 재제출
```

---

## 👩‍🏫 Teacher (교사) 플로우

### 1. 대시보드 (`/teacher/dashboard`)

**목적**: 교사 개인 대시보드

**주요 정보**:
- 내가 담당하는 교육 목록
- 출석부 서명 대기 목록
- 교육 요청 현황

---

### 2. 출석 관리

#### 2.1 출석부 확인 및 서명 (`/teacher/attendance`)
**목적**: 강사가 작성한 출석부 확인 및 서명

**플로우**:
```
출석부 목록 조회
  ↓
출석부 선택
  ↓
출석부 상세 확인:
  - 교육 정보
  - 학생 정보
  - 출석 현황
  - 출석률
  ↓
서명 정보 확인
  ↓
[서명하기] 클릭
  ↓
서명 완료
  ↓
출석부 상태 업데이트
```

**권한**:
- 출석부 조회만 가능
- 서명 기능 (향후 구현 예정)
- 수정 불가

---

### 3. 교육 요청

#### 3.1 교육 요청 제출
**목적**: 교육 관련 요청 사항 제출

**플로우**:
```
교육 요청 페이지 접근
  ↓
요청 사항 입력:
  - 교육명
  - 요청 내용
  - 희망 일정
  - 기타 사항
  ↓
[제출하기] 클릭
  ↓
요청 제출 완료
  ↓
관리자 검토 대기
```

---

## 📍 주요 페이지 경로

### Instructor (강사)

| 메뉴 | 라우트 | 설명 |
|------|--------|------|
| 내 대시보드 | `/instructor/dashboard` | 강사 개인 대시보드 |
| 내 출강 리스트 | `/instructor/schedule/list` | 배정된 교육 목록 |
| 확정된 수업 조회 | `/instructor/schedule/confirmed` | 확정된 교육만 조회 |
| 진행 중인 교육 | `/instructor/schedule/in-progress` | 진행 중인 교육만 조회 |
| 완료된 교육 | `/instructor/schedule/completed` | 완료된 교육만 조회 |
| 오픈 예정 교육 | `/instructor/apply/upcoming` | 곧 오픈될 교육 |
| 출강 신청하기 | `/instructor/apply/open` | 교육 신청 |
| 내가 신청한 교육들 | `/instructor/apply/mine` | 신청 내역 확인 |
| 출석부 작성 | `/instructor/schedule/[educationId]/attendance` | 출석부 작성/수정 |
| 출석부 상세 | `/instructor/attendance/[id]` | 출석부 상세 확인 |
| 활동일지 작성 | `/instructor/activity-logs/[logId]` | 활동일지 작성/수정 |
| 교구확인서 작성 | `/instructor/equipment-confirmations/[id]` | 교구확인서 작성/수정 |
| 강의계획서 작성 | `/instructor/schedule/[educationId]/lesson-plan` | 강의계획서 작성/수정 |
| 증빙자료 작성 | `/instructor/evidence/[id]` | 증빙자료 작성/수정 |

### Teacher (교사)

| 메뉴 | 라우트 | 설명 |
|------|--------|------|
| 내 대시보드 | `/teacher/dashboard` | 교사 개인 대시보드 |
| 출석 관리 | `/teacher/attendance` | 출석부 확인 및 서명 |
| 교육 요청 | `/teacher/request` | 교육 요청 제출 (향후 구현) |

---

## 상태 전환 다이어그램

### Instructor 문서 상태

```
DRAFT → SUBMITTED → APPROVED
                ↓
            REJECTED → (수정) → SUBMITTED → APPROVED
```

**상태 설명**:
- **DRAFT**: 초안 (임시저장, 수정 가능)
- **SUBMITTED**: 제출됨 (관리자 검토 대기, 수정 불가)
- **APPROVED**: 승인됨 (최종 상태, 수정 불가)
- **REJECTED**: 반려됨 (반려 사유 확인 후 수정 가능)

### 교구확인서 추가 상태

```
DRAFT → SUBMITTED → APPROVED → BORROWED → RETURNED
                ↓
            REJECTED → (수정) → SUBMITTED → ...
```

**상태 설명**:
- **BORROWED**: 대여됨 (승인 후 교구 대여 완료)
- **RETURNED**: 반납됨 (교구 반납 완료, 최종 상태)

### Instructor 신청 상태

```
대기 → 승인
  ↓
거절
```

**상태 설명**:
- **대기**: 관리자 검토 중
- **승인**: 출강 확정 (내 출강 리스트에 추가)
- **거절**: 신청 거절됨

---

## 주요 기능 요약

### Instructor (강사) 주요 기능

1. **교육 신청**
   - 공개된 교육 목록 확인
   - 역할 선택 (주강사/보조강사)
   - 신청 제출 및 결과 확인

2. **출강 일정 관리**
   - 내 출강 리스트 조회
   - 교육별 문서 작성 상태 확인
   - 교육 상세 정보 확인

3. **문서 작성 및 제출**
   - 출석부 작성 및 제출
   - 활동일지 작성 및 제출 (사진 5장 이상 필수)
   - 교구확인서 작성 및 제출
   - 강의계획서 작성 및 제출
   - 증빙자료 작성 및 제출

4. **문서 상태 관리**
   - 제출한 문서 승인/반려 상태 확인
   - 반려된 문서 수정 후 재제출

### Teacher (교사) 주요 기능

1. **출석 관리**
   - 출석부 확인
   - 학생 출석 상태 확인
   - 출석부 서명 (향후 구현)

2. **교육 요청**
   - 교육 관련 요청 사항 제출 (향후 구현)

---

## 실시간 동기화

**동기화 메커니즘**:
- localStorage 이벤트를 통한 실시간 업데이트
- CustomEvent를 통한 컴포넌트 간 통신
- 페이지 새로고침 없이 데이터 자동 갱신

**동기화되는 데이터**:
- 교육 생성/수정 시 강사 대시보드에 즉시 반영
- 문서 제출 시 관리자 화면에 즉시 반영
- 문서 승인/반려 시 강사 화면에 즉시 반영

**이벤트 타입**:
- `storage`: localStorage 변경 이벤트
- `attendanceUpdated`: 출석부 업데이트
- `activityUpdated`: 활동일지 업데이트
- `equipmentUpdated`: 교구확인서 업데이트
- `educationStatusUpdated`: 교육 상태 업데이트

---

## 참고 문서

- [PROJECT_FLOW_DOCUMENTATION.md](./PROJECT_FLOW_DOCUMENTATION.md) - 전체 프로젝트 플로우
- [BUSINESS_PROJECT_FLOW.md](./BUSINESS_PROJECT_FLOW.md) - 비즈니스 플로우 상세
- [USER_FLOW.md](./USER_FLOW.md) - 사용자 플로우
- [docs/WORKFLOW_SIMPLE.md](./docs/WORKFLOW_SIMPLE.md) - 워크플로우 간단 정리

---

**문서 작성일**: 2025-01-XX  
**프로젝트 버전**: 1.0.0
